var rule = {
    title: '小苹果[优]',
    host: 'http://c.xpgtv.net',
    url: '/api.php/v2.vod/androidfilter10086?page=fypage&type=fyclass',
    detailUrl: "/api.php/v3.vod/androiddetail2?vod_id=fyid",
    homeUrl: "/api.php/v2.main/androidhome",
    searchUrl: '/api.php/v2.vod/androidsearch10086?page=1&wd=**',
    searchable: 2,
    quickSearch: 1,
    filterable: 1,
    headers: {
        'User-Agent': 'okhttp/3.12.11',
        'version': 'XPGBOX com.phoenix.tv1.5.7',
        'token': 'ElEDlwCVgXcFHFhddiq2JKteHofExRBUrfNlmHrWetU3VVkxnzJAodl52N9EUFS+Dig2A/fBa/V9RuoOZRBjYvI+GW8kx3+xMlRecaZuECdb/3AdGkYpkjW3wCnpMQxf8vVeCz5zQLDr8l8bUChJiLLJLGsI+yiNskiJTZz9HiGBZhZuWh1mV1QgYah5CLTbSz8=',
        'user_id': 'XPGBOX',
        'token2': 'SnAXiSW8vScXE0Z9aDOnK5xffbO75w1+uPom3WjnYfVEA1oWtUdi2Ihy1N8=',
        'hash': 'd78a',
        'timestamp': '1743060300'
    },
    class_name: '电影&电视剧&综艺&动漫&直播',
    class_url: '1&2&3&4&35',
    filter: {
      "1":[{"key":"classes","name":"类型","value":[{"n":"动作片","v":"动作片"},{"n":"喜剧片","v":"喜剧片"},{"n":"爱情片","v":"爱情片"},{"n":"科幻片","v":"科幻片"},{"n":"恐怖片","v":"恐怖片"},{"n":"犯罪片","v":"犯罪片"},{"n":"战争片","v":"战争片"},{"n":"动漫片","v":"动漫片"},{"n":"剧情片","v":"剧情片"},{"n":"纪录片","v":"纪录片"}]},{"key":"areas","name":"地区","value":[{"n":"大陆","v":"大陆"},{"n":"港台","v":"港台"},{"n":"日韩","v":"日韩"},{"n":"欧美","v":"欧美"},{"n":"海外","v":"海外"}]},{"key":"years","name":"年份","value":[{"n":"2025","v":"2025"},{"n":"2024","v":"2024"},{"n":"2023","v":"2023"},{"n":"2022","v":"2022"},{"n":"2021","v":"2021"},{"n":"2020","v":"2020"},{"n":"2019","v":"2019"},{"n":"2018","v":"2018"},{"n":"2017","v":"2017"},{"n":"2016","v":"2016"},{"n":"2015","v":"2015"},{"n":"2014","v":"2014"},{"n":"2012","v":"2012"},{"n":"2011","v":"2011"},{"n":"2010","v":"2010"},{"n":"2009","v":"2009"},{"n":"2008","v":"2008"},{"n":"2007","v":"2007"},{"n":"2006","v":"2006"},{"n":"2005","v":"2005"},{"n":"2004","v":"2004"},{"n":"2003","v":"2003"},{"n":"2002","v":"2002"},{"n":"2001","v":"2001"},{"n":"2001","v":"2001"},{"n":"2000","v":"2000"},{"n":"更早","v":"更早"}]},{"key":"sortby","name":"排序","value":[{"n":"时间","v":"updatetime"},{"n":"人气","v":"hits"},{"n":"评分","v":"score"}]}],
      "2":[{"key":"classes","name":"类型","value":[{"n":"古装","v":"古装"},{"n":"家庭","v":"家庭"},{"n":"历史","v":"历史"},{"n":"情感","v":"情感"},{"n":"悬疑","v":"悬疑"},{"n":"网剧","v":"网剧"},{"n":"偶像","v":"偶像"},{"n":"经典","v":"经典"},{"n":"乡村","v":"乡村"},{"n":"情景","v":"情景"},{"n":"商战","v":"商战"},{"n":"惊悚","v":"惊悚"},{"n":"言情","v":"言情"},{"n":"犯罪","v":"犯罪"},{"n":"奇幻","v":"奇幻"},{"n":"运动","v":"运动"},{"n":"冒险","v":"冒险"},{"n":"音乐","v":"音乐"}]},{"key":"areas","name":"地区","value":[{"n":"大陆","v":"大陆"},{"n":"港台","v":"港台"},{"n":"日韩","v":"日韩"},{"n":"欧美","v":"欧美"},{"n":"海外","v":"海外"}]},{"key":"years","name":"年份","value":[{"n":"2025","v":"2025"},{"n":"2024","v":"2024"},{"n":"2023","v":"2023"},{"n":"2022","v":"2022"},{"n":"2021","v":"2021"},{"n":"2020","v":"2020"},{"n":"2019","v":"2019"},{"n":"2018","v":"2018"},{"n":"2017","v":"2017"},{"n":"2016","v":"2016"},{"n":"2015","v":"2015"},{"n":"2014","v":"2014"},{"n":"2012","v":"2012"},{"n":"2011","v":"2011"},{"n":"2010","v":"2010"},{"n":"2009","v":"2009"},{"n":"2008","v":"2008"},{"n":"2007","v":"2007"},{"n":"2006","v":"2006"},{"n":"2005","v":"2005"},{"n":"2004","v":"2004"},{"n":"2003","v":"2003"},{"n":"2002","v":"2002"},{"n":"2001","v":"2001"},{"n":"2001","v":"2001"},{"n":"2000","v":"2000"},{"n":"更早","v":"更早"}]},{"key":"sortby","name":"排序","value":[{"n":"时间","v":"updatetime"},{"n":"人气","v":"hits"},{"n":"评分","v":"score"}]}],
      "3":[{"key":"classes","name":"类型","value":[{"n":"真人秀","v":"真人秀"},{"n":"脱口秀","v":"脱口秀"},{"n":"选秀","v":"选秀"},{"n":"晚会","v":"晚会"},{"n":"音乐","v":"音乐"},{"n":"情感","v":"情感"},{"n":"访谈","v":"访谈"},{"n":"歌舞","v":"歌舞"},{"n":"竞技","v":"竞技"},{"n":"搞笑","v":"搞笑"}]},{"key":"areas","name":"地区","value":[{"n":"大陆","v":"大陆"},{"n":"港台","v":"港台"},{"n":"日韩","v":"日韩"},{"n":"欧美","v":"欧美"},{"n":"海外","v":"海外"}]},{"key":"years","name":"年份","value":[{"n":"2025","v":"2025"},{"n":"2024","v":"2024"},{"n":"2023","v":"2023"},{"n":"2022","v":"2022"},{"n":"2021","v":"2021"},{"n":"2020","v":"2020"},{"n":"2019","v":"2019"},{"n":"2018","v":"2018"},{"n":"2017","v":"2017"},{"n":"2016","v":"2016"},{"n":"2015","v":"2015"},{"n":"2014","v":"2014"},{"n":"2012","v":"2012"},{"n":"2011","v":"2011"},{"n":"2010","v":"2010"},{"n":"2009","v":"2009"},{"n":"2008","v":"2008"},{"n":"2007","v":"2007"},{"n":"2006","v":"2006"},{"n":"2005","v":"2005"},{"n":"2004","v":"2004"},{"n":"2003","v":"2003"},{"n":"2002","v":"2002"},{"n":"2001","v":"2001"},{"n":"2001","v":"2001"},{"n":"2000","v":"2000"},{"n":"更早","v":"更早"}]},{"key":"sortby","name":"排序","value":[{"n":"时间","v":"updatetime"},{"n":"人气","v":"hits"},{"n":"评分","v":"score"}]}],
      "4":[{"key":"classes","name":"类型","value":[{"n":"热血","v":"热血"},{"n":"少女","v":"少女"},{"n":"魔幻","v":"魔幻"},{"n":"爆笑","v":"爆笑"},{"n":"冒险","v":"冒险"},{"n":"恋爱","v":"恋爱"},{"n":"校园","v":"校园"},{"n":"治愈","v":"治愈"},{"n":"灵异","v":"灵异"},{"n":"机战","v":"机战"},{"n":"格斗","v":"格斗"},{"n":"耽美","v":"耽美"},{"n":"推理","v":"推理"},{"n":"穿越","v":"穿越"}]},{"key":"areas","name":"地区","value":[{"n":"大陆","v":"大陆"},{"n":"港台","v":"港台"},{"n":"日韩","v":"日韩"},{"n":"欧美","v":"欧美"},{"n":"海外","v":"海外"}]},{"key":"years","name":"年份","value":[{"n":"2025","v":"2025"},{"n":"2024","v":"2024"},{"n":"2023","v":"2023"},{"n":"2022","v":"2022"},{"n":"2021","v":"2021"},{"n":"2020","v":"2020"},{"n":"2019","v":"2019"},{"n":"2018","v":"2018"},{"n":"2017","v":"2017"},{"n":"2016","v":"2016"},{"n":"2015","v":"2015"},{"n":"2014","v":"2014"},{"n":"2012","v":"2012"},{"n":"2011","v":"2011"},{"n":"2010","v":"2010"},{"n":"2009","v":"2009"},{"n":"2008","v":"2008"},{"n":"2007","v":"2007"},{"n":"2006","v":"2006"},{"n":"2005","v":"2005"},{"n":"2004","v":"2004"},{"n":"2003","v":"2003"},{"n":"2002","v":"2002"},{"n":"2001","v":"2001"},{"n":"2001","v":"2001"},{"n":"2000","v":"2000"},{"n":"更早","v":"更早"}]},{"key":"sortby","name":"排序","value":[{"n":"时间","v":"updatetime"},{"n":"人气","v":"hits"},{"n":"评分","v":"score"}]}],
      "35":[{"key":"sortby","name":"排序","value":[{"n":"时间","v":"updatetime"},{"n":"人气","v":"hits"},{"n":"评分","v":"score"}]}]
    },
    filter_url:'&area={{fl.areas}}&sort={{fl.sortby}}&class={{fl.classes}}&year={{fl.years}}',
    proxy_rule: $js.toString(() => {      
        let data=fetch(input.url,{headers:rule.headers})       
        // let m3u8=data.replace('URI="','URI="http://194.147.100.39')
        let m3u8=data.replace('URI="',`URI="${rule.host}`)        
        input = [200, 'application/vnd.apple.mpegurl', m3u8]
    }),
    play_parse: true,   
    lazy:$js.toString(() => {     
        let url=getProxyUrl()+'&url='+input    
        input = {
            url: url,
            parse: 0,
            header: rule.headers
        }
    }),
    推荐: $js.toString(() => {
        let data = JSON.parse(fetch(input)).data.list
        data.forEach(itt => {
            itt.list.forEach(it => {
                let desc = it.updateInfo ? `更新至${it.updateInfo}` : it.score;
                d.push({
                    url: it.id,
                    title: it.name,
                    img: it.pic,
                    desc: desc,
                    content: it.content,
                })
            })
        })
        setResult(d)
    }),
    一级: $js.toString(() => {
        let data = JSON.parse(fetch(input)).data;
        let d = [];
        data.forEach(it => {
            let desc = it.updateInfo ? `更新至${it.updateInfo}` : it.score;
            d.push({
                url: it.id,
                title: it.name,
                img: it.pic,
                desc: desc,
                content: it.content,
            });
        });
        setResult(d);
    }),    
    二级: $js.toString(() => {
        let data = JSON.parse(request(input)).data
        let data1 = data.urls;
        let d = []
        data1.forEach(it => {
            const blockKeywords = ['及时雨', '及时雨2', '及时雨3'];
            if (it.key && blockKeywords.some(keyword => it.key.includes(keyword))) {
                return;
            }
            d.push(it.key + "$" + `http://c.xpgtv.net/m3u8/${it.url}.m3u8`)
        })
        VOD = {        
            vod_name: data.name,      
            vod_type: data.className,
            vod_pic: data.pic,        
            vod_year: data.year,      
            vod_area: data.area,      
            vod_remarks: data.score || data.updateInfo, 
            vod_actor: data.actor,    
            vod_director: data.director, 
            vod_content: data.content,    
            vod_play_from: '小苹果线路',
            vod_play_url: d.join('#')
        }
    }),    
    搜索: 'json:data;name;pic;score;id',
}
