"rules":[
    /* ç¬¬ä¸€å±‚ï¼šåŸŸåçº§å±è”½ */
    {"name":"ðŸš«AD-Hosts","hosts":[
        "ad.","ads.","adserver","guanggao","*.ad.*","tracker.","log.",
        "doubleclick.net","adsystem.com","amung.cn","tanx.com","alimama.com"
    ],"action":"reject"},

    /* ç¬¬äºŒå±‚ï¼šç²¾å‡†TSç‰¹å¾ */
    {"name":"ðŸ”TS-Fingerprint","hosts":["*"],"regex":[
        "(#EXT-X-DISCONTINUITY[\\r\\n]+#EXTINF:(?:3|5|10|15)(?:\\.[\\d]+)?,[\\s\\S]*?(?:/ad/|/guanggao/|advert_).*?#EXT-X-DISCONTINUITY)",
        "(#UPLYNK-SEGMENT.*?(?:duration=\\d{15}|sponsored=true))"
    ]},

    /* ç¬¬ä¸‰å±‚ï¼šæ™ºèƒ½æ—¶é•¿è¿‡æ»¤ */
    {"name":"â±ï¸Duration-Match","hosts":["*"],"regex":[
        "(#EXTINF:(0?\\.[1-9]|1\\.[0-9]|[2-9])(?!\\d).*?1o\\.ts)",  // æŽ’é™¤æ­£å¸¸è¿‡æ¸¡ç‰‡æ®µ
        "(#EXTINF:([12]\\d|30)(\\.\\d+)?,.*?/(preview|trailer)/)"  // é•¿å¹¿å‘Šæ ‡è¯†
    ]},

    /* ç¬¬å››å±‚ï¼šè¯­ä¹‰åˆ†æž */
    {"name":"ðŸ“–Semantic-Filter","hosts":["*"],"regex":[
        "/(ad[sv]|promo|sponsor)/[^/]+\\.ts(\\?|$)",  // è·¯å¾„ç‰¹å¾
        "(èµžåŠ©|æŽ¨è|èµŒåœº|VIPå¼€é€š|ç‚¹æ­¤ä¸‹è½½|æ¾³é—¨)"  // ä¸­æ–‡å…³é”®è¯
    ]},

    /* ç¬¬äº”å±‚ï¼šAIè¾…åŠ©(éœ€æ’ä»¶) */
    {"name":"ðŸ¤–AI-Validator","hosts":["*"],"script":"
        if(ad_probability > 0.9 && !is_whitelist){
            return {'action':'block','reason':'AI_Detection'};
        }
    "}
]